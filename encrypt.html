<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div>
        <h3>Caesar cipher</h3>
        <input type="text" placeholder="text die geëncrypt moet worden" id="text">
        <input type="number" placeholder="rotatie hoeveelheid" id="rotation">
        <button onclick="encrypt()">encrypt</button>
        <input type="text" placeholder="geëncrypte text" readonly id="textEncrypted">
        <button onclick="decrypt()">decrypt</button>
        <input type="text" placeholder="gedecrypte text" readonly id="textDecrypted">
    </div>

    <div>
        <h3>Vigenere cipher</h3>
        <input type="text" placeholder="text die geëncrypt moet worden" id="text2">
        <input type="text" placeholder="sleutel" id="key">
        <button onclick="encrypt2()">encrypt</button>
        <input type="text" placeholder="geëncrypte text" readonly id="textEncrypted2">
        <button onclick="decrypt2()">decrypt</button>
        <input type="text" placeholder="gedecrypte text" readonly id="textDecrypted2">
    </div>

</body>
</html>

<script>

//opdracht 1

    let rotation = 0;

    function encrypt() {

        rotation = parseInt(document.getElementById("rotation").value);

        let text = document.getElementById("text").value;
        text = text.toLowerCase();
        text = text.replace(/[^\w\s]/g,'');
        text = text.replace(/[0-9]/g, '')
        text = text.replace(/\s/g, '');
        let textArray = Array.from(text);
        let textEncrypted = [];

        textArray.forEach(letter => {
            charCode = letter.charCodeAt() + rotation;

            if (charCode > 122) {
                charCode -= 26;
            }
            if (charCode < 97) {
                charCode += 26;
            }
            textEncrypted.push(charCode);
        });

        let encryptedString = "";

        textEncrypted.forEach(number => {
            encryptedString = encryptedString + String.fromCharCode(number);
        });

        document.getElementById("textEncrypted").value = encryptedString;
    }
    function decrypt() {

        let text = document.getElementById("textEncrypted").value;
        let textArray = Array.from(text);
        let textDecrypted = [];

        textArray.forEach(letter => {
            charCode = letter.charCodeAt() - rotation;

            if (charCode > 122) {
                charCode -= 26;
            }
            if (charCode < 97) {
                charCode += 26;
            }
            textDecrypted.push(charCode);
        });

        let decryptedString = "";

        textDecrypted.forEach(number => {
            decryptedString = decryptedString + String.fromCharCode(number);
        });

        document.getElementById("textDecrypted").value = decryptedString;
    }

//opdracht2

    function encrypt2(){

        let text = document.getElementById("text2").value;
        let key = document.getElementById("key").value;

        var encryptedText = "";
        for(var i = 0, j = 0; i < text.length; i++){
            var currentLetter = text[i];

            var lowerLetter = ((currentLetter.charCodeAt() - 97) + (key[j%key.length].toLowerCase().charCodeAt() - 97)) % 26;
            encryptedText += String.fromCharCode(lowerLetter+97);
            j++;
        }
        document.getElementById("textEncrypted2").value = encryptedText;
    };

    
    function decrypt2(){

        let text = document.getElementById("textEncrypted2").value;
        let key = document.getElementById("key").value;

        var decryptedText = "";
        for(var i = 0, j = 0; i < text.length; i++){
            var currentLetter = text[i];

            var lowerLetter = ((currentLetter.charCodeAt() - 97) - (key[j%key.length].toLowerCase().charCodeAt() - 97)) % 26;

            lowerLetter = lowerLetter + 97;

            if (lowerLetter < 97) {
                lowerLetter += 26;
            }

            decryptedText += String.fromCharCode(lowerLetter);
            j++;
        }
        document.getElementById("textDecrypted2").value = decryptedText;
    };

    document.write("<table>");
    for (var a=97; a <= 122; a++) {
        document.write("<tr>");
        b = a;
        for(b; b < a+26; b++) {
            let c;
            if (b > 122) {
                c = b - 26;
            }
            else {
                c = b;
            }
            document.write("<td>"+ String.fromCharCode(c) +"</td>");
        }
        document.write("</tr>");
    }
    document.write("</table>");





</script>

<style>
    div {
        display: flex;
        flex-wrap: wrap;
        width: 500px;
        margin: auto;
        margin-top: 100px;
    }

    input[type=text], input[type="number"], button {
        width: 100%;
        padding: 5px;
        margin: 1px;
    }

    h3 {
        text-align: center;
        width: 100%;
    }

</style>